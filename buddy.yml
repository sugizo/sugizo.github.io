- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Execute: jigsaw"
    type: "BUILD"
    docker_image_name: "library/php"
    docker_image_tag: "5.6"
    execute_commands:
    - "composer install"
    - "./vendor/bin/jigsaw build"
    - "rm -rf sugizo.github.io"
    - "git clone https://sugizo:${GITHUB_PASSWORD}@github.com/sugizo/sugizo.github.io.git"
    - "git config --global user.email 'steve.van.christie@gmail.com'"
    - "git config --global user.name 'sugizo'"
    - "cp -r build_local/* sugizo.github.io/"
    - "cd sugizo.github.io"
    - "git add --all"
    - "git commit -m 'From Buddy'"
    - "git push -u origin master"
    setup_commands:
    - "apt-get update && apt-get install -y git unzip"
    - "curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer"
    trigger_condition: "ALWAYS"
